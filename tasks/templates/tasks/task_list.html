{% extends "base.html" %}
{% load static %}
{% block title %} –ó–∞–¥–∞—á–∏ –∏ –ø—Ä–∏–≤—ã—á–∫–∏ Taskoro ‚Äî –¢–≤–æ–π –ø—É—Ç—å –∫ –ø–æ–±–µ–¥–µ {% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'vendor/css/ta.css' %}">
{% endblock %}
{% block seo %}
<meta name="description" content="–°–æ–∑–¥–∞–≤–∞–π –∏ –≤—ã–ø–æ–ª–Ω—è–π –∑–∞–¥–∞—á–∏, –ø—Ä–æ–∫–∞—á–∏–≤–∞–π –ø—Ä–∏–≤—ã—á–∫–∏ –∏ –ø–æ–±–µ–∂–¥–∞–π –ª–µ–Ω—å –≤–º–µ—Å—Ç–µ —Å Taskoro!">
<meta name="keywords" content="–∑–∞–¥–∞—á–∏, —Ç—Ä–µ–∫–µ—Ä –ø—Ä–∏–≤—ã—á–µ–∫, –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, –º–æ—Ç–∏–≤–∞—Ü–∏—è, —Å–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–µ, Taskoro">
<meta name="robots" content="index, follow">
<meta name="author" content="Dan Dasakami">

<!-- Open Graph -->
<meta property="og:title" content="–ó–∞–¥–∞—á–∏ –∏ –ø—Ä–∏–≤—ã—á–∫–∏ Taskoro ‚Äî –¢–≤–æ–π –ø—É—Ç—å –∫ –ø–æ–±–µ–¥–µ">
<meta property="og:description" content="–°–æ–∑–¥–∞–≤–∞–π –∏ –≤—ã–ø–æ–ª–Ω—è–π –∑–∞–¥–∞—á–∏, –ø—Ä–æ–∫–∞—á–∏–≤–∞–π –ø—Ä–∏–≤—ã—á–∫–∏ –∏ –ø–æ–±–µ–∂–¥–∞–π –ª–µ–Ω—å –≤–º–µ—Å—Ç–µ —Å Taskoro!">
<meta property="og:type" content="website">
<meta property="og:url" content="{{ request.build_absolute_uri }}">
<meta property="og:image" content="">

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="–ó–∞–¥–∞—á–∏ –∏ –ø—Ä–∏–≤—ã—á–∫–∏ Taskoro ‚Äî –¢–≤–æ–π –ø—É—Ç—å –∫ –ø–æ–±–µ–¥–µ">
<meta name="twitter:description" content="–°–æ–∑–¥–∞–≤–∞–π –∏ –≤—ã–ø–æ–ª–Ω—è–π –∑–∞–¥–∞—á–∏, –ø—Ä–æ–∫–∞—á–∏–≤–∞–π –ø—Ä–∏–≤—ã—á–∫–∏ –∏ –ø–æ–±–µ–∂–¥–∞–π –ª–µ–Ω—å –≤–º–µ—Å—Ç–µ —Å Taskoro!">
<meta name="twitter:image" content="">
{% endblock %}


{% block content %}
<div class="tasks-container">
    <div class="tasks-header reveal">
        <h1 class="text-gradient">–¢–≤–æ–∏ –∑–∞–¥–∞—á–∏</h1>
        <div class="tasks-actions">
            <a href="{% url 'tasks:task_create' %}" class="btn">
                <span class="btn-icon">+</span>
                <span class="btn-text">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</span>
            </a>
        </div>
    </div>

    <div class="tasks-filters card reveal">
        <div class="card-body">
            <form method="get" class="filters-form">
                <div class="filter-group">
                    <label for="category" class="filter-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                    <select name="category" id="category" class="filter-select" onchange="this.form.submit()">
                        <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                        {% for category in categories %}
                        <option value="{{ category.id }}" {% if selected_category == category.id|stringformat:"s" %}selected{% endif %}>
                            {{ category.name }}
                        </option>
                        {% endfor %}
                    </select>
                </div>
                <div class="filter-group">
                    <label for="difficulty" class="filter-label">–°–ª–æ–∂–Ω–æ—Å—Ç—å</label>
                    <select name="difficulty" id="difficulty" class="filter-select" onchange="this.form.submit()">
                        <option value="">–í—Å–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏</option>
                        {% for value, text in difficulty_choices %}
                        <option value="{{ value }}" {% if selected_difficulty == value %}selected{% endif %}>
                            {{ text }}
                        </option>
                        {% endfor %}
                    </select>
                </div>
                <div class="filter-group">
                    <label for="status" class="filter-label">–°—Ç–∞—Ç—É—Å</label>
                    <select name="status" id="status" class="filter-select" onchange="this.form.submit()">
                        <option value="">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
                        <option value="overdue" {% if selected_status == 'overdue' %}selected{% endif %}>–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ</option>
                        {% for value, text in status_choices %}
                        <option value="{{ value }}" {% if selected_status == value %}selected{% endif %}>
                            {{ text }}
                        </option>
                        {% endfor %}
                    </select>
                </div>
                <div class="filter-group filter-actions">
                    <button type="submit" class="btn btn-secondary">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                    <a href="{% url 'tasks:tasks' %}" class="btn-small">–°–±—Ä–æ—Å–∏—Ç—å</a>
                </div>
            </form>
        </div>
    </div>

    <div class="tasks-list reveal">
        {% if tasks %}
            {% for task in tasks %}
            <div class="task-card {% if task.is_completed %}completed{% elif task.is_overdue %}overdue{% endif %}">
                <div class="task-difficulty" ></div>
                <div class="task-content">
                    <div class="task-header">
                        <h3 class="task-title">{{ task.title }}</h3>
                        {% if task.category %}
                        <span class="task-category" >
                            {{ task.category.name }}
                        </span>
                        {% endif %}
                    </div>
                    <div class="task-info">
                        <div class="task-status">
                            <span class="status-icon">
                                {% if task.is_completed %}‚úÖ
                                {% elif task.is_overdue %}‚ö†Ô∏è
                                {% elif task.status == 'in_progress' %}‚è≥
                                {% elif task.status == 'waiting' %}‚è∏Ô∏è
                                {% else %}üîÑ
                                {% endif %}
                            </span>
                            <span class="status-text">{{ task.get_status_display_custom }}</span>
                        </div>
                        {% if task.deadline %}
                        <div class="task-deadline {% if task.is_overdue %}overdue{% endif %}">
                            <span class="deadline-icon">‚è∞</span>
                            <span class="deadline-text">{{ task.deadline|date:"d.m.Y H:i" }}</span>
                        </div>
                        {% endif %}
                    </div>
                    {% if task.description %}
                    <div class="task-description">
                        {{ task.description|truncatewords:20 }}
                    </div>
                    {% endif %}
                </div>
                <div class="task-actions">
                    <a href="{% url 'tasks:task_detail' task.id %}" class="btn-small">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
                    {% if not task.is_completed %}
                    <a href="{% url 'tasks:task_complete' task.id %}?next={{ request.path }}" class="btn-small btn-complete">–ó–∞–≤–µ—Ä—à–∏—Ç—å</a>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        {% else %}
            <div class="empty-state">
                <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–¥–∞—á. –°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ—é –ø–µ—Ä–≤—É—é –∑–∞–¥–∞—á—É!</p>
                <a href="{% url 'tasks:task_create' %}" class="btn">–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É</a>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}