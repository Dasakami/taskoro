{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Taskoro ‚Äî –ò–≥—Ä–æ–≤–∞—è –ø—Ä–æ–∫–∞—á–∫–∞ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã –∏ –ø—Ä–∏–≤—ã—á–µ–∫{% endblock %}</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link rel="stylesheet" href="/static/vendor/css/reset.css">
    <link rel="stylesheet" href="/static/vendor/css/base.css">
    <link rel="stylesheet" href="/static/vendor/css/animations.css">
    <link rel="shortcut icon" href="{% static 'images/favicon.ico' %}" type="image/x-icon">
    {% block extra_css %}{% endblock %}
    {% block seo %}
<meta name="description" content="Taskoro ‚Äî –∏–≥—Ä–æ–≤–æ–π —Ç—Ä–µ–∫–µ—Ä –∑–∞–¥–∞—á –∏ –ø—Ä–∏–≤—ã—á–µ–∫ –≤ —Å—Ç–∏–ª–µ Solo Leveling. –†–∞–∑–≤–∏–≤–∞–π —Å–µ–±—è, —Å–æ—Ä–µ–≤–Ω—É–π—Å—è, –ø–æ–±–µ–∂–¥–∞–π!">
<meta name="keywords" content="–¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞, —Ç—Ä–µ–∫–µ—Ä –∑–∞–¥–∞—á, —Å–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–µ, –ø—Ä–∏–≤—ã—á–∫–∏, –∏–≥—Ä–∞, –º–æ—Ç–∏–≤–∞—Ü–∏—è, —Ä–µ–π—Ç–∏–Ω–≥, –¥—É—ç–ª–∏, Taskoro">
<meta name="robots" content="index, follow">
<meta name="author" content="Dan Dasakami">

<!-- Open Graph -->
<meta property="og:title" content="Taskoro ‚Äî –ø—Ä–æ–∫–∞—á–∞–π –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—É –∏ –ø—Ä–∏–≤—ã—á–∫–∏">
<meta property="og:description" content="Taskoro ‚Äî –∏–≥—Ä–æ–≤–æ–π —Ç—Ä–µ–∫–µ—Ä –∑–∞–¥–∞—á –∏ –ø—Ä–∏–≤—ã—á–µ–∫ –≤ —Å—Ç–∏–ª–µ Solo Leveling. –†–∞–∑–≤–∏–≤–∞–π —Å–µ–±—è, —Å–æ—Ä–µ–≤–Ω—É–π—Å—è, –ø–æ–±–µ–∂–¥–∞–π!">
<meta property="og:type" content="website">
<meta property="og:url" content="{{ request.build_absolute_uri }}">
<meta property="og:image" content="">

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Taskoro ‚Äî –ø—Ä–æ–∫–∞—á–∞–π –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—É –∏ –ø—Ä–∏–≤—ã—á–∫–∏">
<meta name="twitter:description" content="Taskoro ‚Äî –∏–≥—Ä–æ–≤–æ–π —Ç—Ä–µ–∫–µ—Ä –∑–∞–¥–∞—á –∏ –ø—Ä–∏–≤—ã—á–µ–∫ –≤ —Å—Ç–∏–ª–µ Solo Leveling. –†–∞–∑–≤–∏–≤–∞–π —Å–µ–±—è, —Å–æ—Ä–µ–≤–Ω—É–π—Å—è, –ø–æ–±–µ–∂–¥–∞–π!">
<meta name="twitter:image" content="">
{% endblock %}

</head>
<body>
    <div class="app-container">
    <button class="burger-btn" aria-label="Toggle sidebar">
        ‚ò∞
    </button>
        <nav class="sidebar">
            <div class="sidebar-header">
                {% if user.is_authenticated %}
                <a href="{% url 'users:profile:profile' %}" class="user-avatar">
                    <div class="avatar-frame">
                        {% if user.profile.avatar %}
                        <img src="{{ user.profile.avatar.url }}" alt="Avatar">
                        {% else %}
                        <img src="{{ '/static/images/default-avatar.png' }}" alt="Avatar">
                        {% endif %}
                    </div>
                </a>
                {% else %}
                <a href="{% url 'users:login' %}">–í–æ–π—Ç–∏</a>
                {% endif %}
                <div class="user-info">
                    <h3 class="username">
                        {% if user.is_authenticated %}
                        {{ user.username }}
                        {% else %}
                        –ì–æ—Å—Ç—å
                        {% endif %}
                    </h3>
                    <div class="level">–£—Ä–æ–≤–µ–Ω—å: {{ user.profile.level|default:"1" }}</div>
                </div>
            </div>
            <ul class="nav-links">
                <li><a href="{% url 'main' %}" class="nav-link {% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}">
                    <span class="nav-icon">üè†</span>
                    <span class="nav-text">–ì–ª–∞–≤–Ω–∞—è</span>
                </a></li>
                <li><a href="{% url 'tasks:tasks' %}" class="nav-link {% if request.resolver_match.url_name == 'tasks' %}active{% endif %}">
                    <span class="nav-icon">‚úÖ</span>
                    <span class="nav-text">–ó–∞–¥–∞—á–∏</span>
                </a></li>
                <li><a href="{% url 'tournaments:tournaments' %}" class="nav-link {% if request.resolver_match.url_name == 'tournaments' %}active{% endif %}">
                    <span class="nav-icon">üèÜ</span>
                    <span class="nav-text">–¢—É—Ä–Ω–∏—Ä</span>
                </a></li>
                <li><a href="{% url 'duels:duels' %}" class="nav-link {% if request.resolver_match.url_name == 'duels' %}active{% endif %}">
                    <span class="nav-icon">‚öîÔ∏è</span>
                    <span class="nav-text">–î—É—ç–ª—å</span>
                </a></li>
                <li><a href="{% url 'friends:friends' %}" class="nav-link {% if request.resolver_match.url_name == 'friends' %}active{% endif %}">
                    <span class="nav-icon">üßë‚Äçü§ù‚Äçüßë</span>
                    <span class="nav-text">–î—Ä—É–∑—å—è</span>
                </a></li>
                <li><a href="{% url 'history:achievements' %}" class="nav-link {% if request.resolver_match.url_name == 'achievements' %}active{% endif %}">
                    <span class="nav-icon">üèÖ</span>
                    <span class="nav-text">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</span>
                </a></li>
                <li><a href="{% url 'shop:shop' %}" class="nav-link {% if request.resolver_match.url_name == 'shop' %}active{% endif %}">
                    <span class="nav-icon">üõí</span>
                    <span class="nav-text">–ú–∞–≥–∞–∑–∏–Ω</span>
                </a></li>
                <li><a href="{% url 'history:history' %}" class="nav-link {% if request.resolver_match.url_name == 'history' %}active{% endif %}">
                    <span class="nav-icon">üìú</span>
                    <span class="nav-text">–ò—Å—Ç–æ—Ä–∏—è</span>
                </a></li>
                <li><a href="{% url 'note:notes_list' %}" class="nav-link {% if request.resolver_match.url_name == 'notes' %}active{% endif %}">
                    <span class="nav-icon">üß†</span>
                    <span class="nav-text">–ó–∞–º–µ—Ç–∫–∏</span>
                </a></li>
            </ul>
            <div class="sidebar-footer">
                {% if user.is_authenticated %}
                <form action="{% url 'users:logout' %}" method="post" style="display: inline;">
                    {% csrf_token %}
                    <button type="submit" class="logout-btn">
                        <span class="logout-icon">üö™</span>
                    
                    <span class="logout-text">–í—ã–π—Ç–∏</span>
                        </button>
                </form>
                {% endif %}

            </div>
        </nav>
        
        <main class="content">
            {% block content %}{% endblock %}
        </main>
        
    </div>
    
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const burgerBtn = document.querySelector('.burger-btn');
        const sidebar = document.querySelector('.sidebar');

        burgerBtn.addEventListener('click', () => {
            sidebar.classList.toggle('sidebar-active');
        });

        // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–∫—Ä—ã—Ç–∏–µ —Å–∞–π–¥–±–∞—Ä–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –Ω–µ–≥–æ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
        document.addEventListener('click', (e) => {
            if (!sidebar.contains(e.target) && !burgerBtn.contains(e.target)) {
                sidebar.classList.remove('sidebar-active');
            }
        });
    });
</script>

    <!-- Magic particle effects overlay -->
    <div class="magic-particles"></div>
    
    <!-- Scripts -->
    <script src="/static/vendor/js/animations.js"></script>
    {% block extra_js %}{% endblock %}

    <div id="toast-container" class="toast-container">
    {% if messages %}
        {% for message in messages %}
            <div class="toast toast-{{ message.tags }}">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}
</div>

<style>
    .toast-container {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 9999;
    display: flex;
    flex-direction: column;
    gap: 10px;
    padding: 0 15px;
}

.toast {
    padding: 12px 20px;
    border-radius: 12px;
    font-family: 'Rajdhani', sans-serif;
    font-size: 16px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    animation: slideIn 0.4s ease, fadeOut 0.5s ease 3.5s forwards;
    opacity: 0.95;
    min-width: 220px;
    max-width: 90vw;
    word-break: break-word;
}

/* –¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π */
.toast-success {
    background-color: #d1ffd6;
    color: #156b3e;
}
.toast-info {
    background-color: #dceeff;
    color: #0c4e78;
}
.toast-warning {
    background-color: #fff3cd;
    color: #8a6d1f;
}
.toast-error {
    background-color: #ffd6d6;
    color: #8f1e1e;
}

/* –ê–Ω–∏–º–∞—Ü–∏–∏ */
@keyframes slideIn {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 0.95; }
}
@keyframes fadeOut {
    to { opacity: 0; transform: translateY(-10px); }
}

/* –ê–¥–∞–ø—Ç–∏–≤ */
@media (max-width: 600px) {
    .toast-container {
        top: auto;
        bottom: 20px;
        right: 50%;
        transform: translateX(50%);
        align-items: center;
    }
}

</style>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const toasts = document.querySelectorAll('.toast');
        setTimeout(() => {
            toasts.forEach(toast => toast.remove());
        }, 4000); // 4 —Å–µ–∫—É–Ω–¥—ã
    });
</script>


</body>
</html>