{% extends 'base.html' %}
{% load static %}

{% block title %}–ú–∞–≥–∞–∑–∏–Ω | Taskoro{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'vendor/css/shop-s.css' %}">
{% endblock %}

{% block content %}
<div class="shop-container">
    <div class="shop-header">
        <h1 class="shop-title">–ú–∞–≥–∞–∑–∏–Ω</h1>
        <div class="user-currency">
            <div class="currency coins">
                <span class="currency-icon">üí∞</span>
                <span class="currency-amount">{{ request.user.profile.coins }}</span>
            </div>
            <div class="currency gems">
                <span class="currency-icon">üíé</span>
                <span class="currency-amount">{{ request.user.profile.gems }}</span>
            </div>
        </div>
    </div>

    <div class="shop-navigation">
        <ul class="shop-categories">
            <li><a href="{% url 'shop:shop' %}" class="active">–ì–ª–∞–≤–Ω–∞—è</a></li>
            {% for category_value, category_name in categories %}
            <li><a href="{% url 'shop:shop_category' category=category_value %}">{{ category_name }}</a></li>
            {% endfor %}
            <li><a href="{% url 'shop:chest_list' %}">–°—É–Ω–¥—É–∫–∏</a></li>
            <li><a href="{% url 'shop:user_inventory' %}">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</a></li>
        </ul>
    </div>

    <section class="featured-items">
        <h2 class="section-title">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç–æ–≤–∞—Ä—ã</h2>
        <div class="items-grid">
            {% for item in featured_items %}
            <div class="shop-item" data-category="{{ item.category }}">
                <div class="item-image">
                    {% if item.image %}
                    <img src="{{ item.image.url }}" alt="{{ item.name }}">
                    {% else %}
                    <div class="placeholder-image">{{ item.name|first }}</div>
                    {% endif %}
                </div>
                <div class="item-details">
                    <h3 class="item-name">{{ item.name }}</h3>
                    <p class="item-price">
                        {% if item.currency == 'coins' %}
                        <span class="price-icon">üí∞</span>
                        {% else %}
                        <span class="price-icon">üíé</span>
                        {% endif %}
                        <span class="price-amount">{{ item.price }}</span>
                    </p>
                </div>
                <a href="{% url 'shop:item_detail' item_id=item.id %}" class="item-link">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
            </div>
            {% empty %}
            <p class="empty-message">–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤</p>
            {% endfor %}
        </div>
    </section>

    <section class="new-items">
        <h2 class="section-title">–ù–æ–≤—ã–µ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è</h2>
        <div class="items-grid">
            {% for item in new_items %}
            <div class="shop-item" data-category="{{ item.category }}">
                <div class="item-image">
                    {% if item.image %}
                    <img src="{{ item.image.url }}" alt="{{ item.name }}">
                    {% else %}
                    <div class="placeholder-image">{{ item.name|first }}</div>
                    {% endif %}
                </div>
                <div class="item-details">
                    <h3 class="item-name">{{ item.name }}</h3>
                    <p class="item-price">
                        {% if item.currency == 'coins' %}
                        <span class="price-icon">üí∞</span>
                        {% else %}
                        <span class="price-icon">üíé</span>
                        {% endif %}
                        <span class="price-amount">{{ item.price }}</span>
                    </p>
                </div>
                <a href="{% url 'shop:item_detail' item_id=item.id %}" class="item-link">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
            </div>
            {% empty %}
            <p class="empty-message">–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤</p>
            {% endfor %}
        </div>
    </section>

    <section class="shop-categories-grid">
        <h2 class="section-title">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h2>
        <div class="categories-grid">
            {% for category_value, category_name in categories %}
            <a href="{% url 'shop:shop_category' category=category_value %}" class="category-card" data-category="{{ category_value }}">
                <div class="category-icon">
                    {% if category_value == 'avatar_frame' %}üñºÔ∏è
                    {% elif category_value == 'title' %}‚ú®
                    {% elif category_value == 'background' %}üèûÔ∏è
                    {% elif category_value == 'effect' %}üí´
                    {% elif category_value == 'boost' %}üöÄ
                    {% elif category_value == 'chest' %}üì¶
                    {% endif %}
                </div>
                <h3 class="category-name">{{ category_name }}</h3>
            </a>
            {% endfor %}
        </div>
    </section>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'vendor/js/shop.js' %}"></script>
{% endblock %}